<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">

  <f:view locale="#{muikkuSession.locale}">
  
    <h:head>
      <title>#{i18n.text['title']}</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta content="width=device-width, initial-scale=1.0" name="viewport" />
      <script type="text/javascript">
          var CONTEXTPATH = "#{request.contextPath}";
          var MUIKKU_LOGGED_USER_ID = parseInt('#{sessionBackingBean.loggedUserId}')||null;
          var MUIKKU_LOGGEDIN = #{muikkuSession.loggedIn};
          var MUIKKU_LOGGEDINROLES = {
            teacher: #{sessionBackingBean.teacherLoggedIn},
            manager: #{sessionBackingBean.managerLoggedIn},
            admin: #{sessionBackingBean.administratorLoggedIn},
            student: #{sessionBackingBean.studentLoggedIn}
          };
      </script>
      <script type="text/javascript" src="#{request.contextPath}/rest/meta/resources?format=js"></script>
      
      <script type="text/javascript" src="#{request.contextPath}/JavaScriptLocales?lang=#{muikkuSession.locale}"></script>
      <h:outputScript name="scripts/gui/locales.js" target="head" />
  
      <!-- CSS to remove all default styles -->
      <h:outputStylesheet library="#{sessionBackingBean.resourceLibrary}" name="css/cssreset-min.css" />

      <!--  Temporary styles -->
      <h:outputStylesheet library="#{sessionBackingBean.resourceLibrary}" name="css/temp.css" />
      
      <!--  Icon Font -->
      <link rel="stylesheet" type="text/css" href="#{request.contextPath}/icons/icomoon/icons.css"/>
      
      <!-- Dynamic Grid -->
      <h:outputStylesheet library="#{sessionBackingBean.resourceLibrary}" name="css/dgrid.css" />
      

      <!-- Moment -->
      <h:outputScript name="scripts/moment/moment-with-locales.min.js" />    
        
      <!-- jQuery -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"/>
      <script type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery.klass/0.1a/jquery.klass-0.1a.js"></script>
      
      <ui:fragment rendered="#{sessionBackingBean.testsRunning}"> 
        <script type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate/1.0.1/jquery.simulate.js"></script>
        <script type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate-ext/1.3.0/jquery.simulate.ext.js"></script>
        <script type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate-ext/1.3.0/jquery.simulate.drag-n-drop.js"></script>
      </ui:fragment>
      <h:outputScript rendered="#{sessionBackingBean.testsRunning}" name="scripts/debug.js" />
      
      <!-- Perfect Scrollbar -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.5/js/min/perfect-scrollbar.jquery.min.js"/>
      <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.5/css/perfect-scrollbar.min.css"/>
  
      <!-- jQuery UI -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"/>
      <h:outputStylesheet library="#{sessionBackingBean.resourceLibrary}" name="css/jquery-ui.css" />
  
      <!--  jQuery Waypoints  -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"/>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/shortcuts/sticky-elements/waypoints-sticky.min.js"/>
  
      <!--  jQuery scroll  -->
      <h:outputScript name="scripts/scroll/jquery.scroll.js" />
  
      <!--  jQuery M3-modal  -->
      <h:outputScript name="scripts/jquery.m3modal/jquery.m3modal.js" />
  
      <!--  jQuery Touch Punch  -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"/>
  
      <!-- Functions that have no home yet. Find a home for them? -->
      <h:outputScript name="scripts/passingthrough.js" target="head"/>   
      
      <!-- Dust -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dustjs-linkedin/2.7.1/dust-full.min.js"/>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dustjs-helpers/1.7.1/dust-helpers.min.js"/>
      <h:outputScript name="scripts/gui/dustloader.js" />
      
      <!-- Async -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/async/0.9.0/async.js"/>
      
      <!-- ObjectPath -->
      <script type="text/javascript" src="//cdn.muikkuverkko.fi/lib-bundle?libs=objectpathjs/0.0.1/interpreter.js|objectpathjs/0.0.1/parse.js|objectpathjs/0.0.1/tokens.js"></script>
      
      <!-- jQuery REST -->
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.rest/1.0.2/jquery.rest.min.js"/>
      
      <!-- Api -->
      <h:outputScript name="scripts/api/api.js"/>

      <h:outputScript name="scripts/debug.js"/>
  
      <!-- Widget Controller -->
      <h:outputScript name="scripts/gui/widgetcontroller.js" />
      
      <!-- Notification Queue -->
      <h:outputScript name="scripts/notificationqueue/notificationqueue.js" />
      
      <!-- WebSocket -->
      <h:outputScript name="scripts/gui/websocket.js" />
      
      <!-- Social navigation -->
      <h:outputScript name="scripts/gui/socialnavigation.js" />   
      
      <!-- Login -->
      <h:outputScript name="scripts/gui/login.js" />   

      <!-- Screen CSS -->
      <h:outputStylesheet library="#{sessionBackingBean.resourceLibrary}" name="css/screen.css" />
      
      <!--  Heartbeat -->
      <h:outputScript name="scripts/gui/heartbeat.js" target="head" />
      

      <ui:insert name="mainfunctionScripts"></ui:insert> 
      <ui:insert name="viewScripts"></ui:insert> 
      <ui:insert name="viewCss"></ui:insert>
  
    </h:head>
  
    <h:body styleClass="#{bodyClass}">
    
      <ui:include src="/facelets/generic/notification-queue.xhtml"/>
  
  	  <ui:insert name="sitebody">
      
      </ui:insert>    
    </h:body>
  
  </f:view>
</html>
