<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  lang="#{sessionBackingBean.locale}"
>
  <!-- Base takes no parameters -->
  <!-- Base takes four defines, styles, scripts, body and title, where title is not required -->

  <f:view locale="#{sessionBackingBean.locale}">
    <head>
      <title>#{empty title ? i18n.text['plugin.site.title'] : title}</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta http-equiv="x-ua-compatible" content="ie=edge" />
      <meta
        content="width=device-width, initial-scale=1, user-scalable=yes"
        name="viewport"
      />
      <ui:insert name="meta"></ui:insert>

      <script type="text/javascript">
        window.rsConf = {
          general: {
            usePost: true,
            enableSkipAlways: true,
          },
          ui: {
            tools: {
              translation: false,
              dictionary: false,
              pagemask: false,
              download: false,
              clicklisten: false,
              enlarge: false,
              skipbuttons: false,
            },
          },
        };
      </script>

      <script type="text/javascript">
        var CONTEXTPATH = "#{request.contextPath}";
      </script>

      <!-- jQuery -->
      <script
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/jquery/2.1.3/jquery.min.js"
      />

      <!-- jQuery UI -->
      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/jqueryui/1.11.2/jquery-ui.min.js"
      />

      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/jqueryui/1.11.2/i18n/datepicker-fi.js"
      />

      <script defer="defer" type="text/javascript">
        $(document).ready(function () {
          $.datepicker.setDefaults(
            $.datepicker.regional["#{sessionBackingBean.locale}"]
          );
        });
      </script>

      <!-- Api resources -->
      <script
        defer="defer"
        type="text/javascript"
        src="#{request.contextPath}/rest/meta/resources?format=js"
      ></script>

      <!-- Async
      <script defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/async/0.9.0/async.js" />-->

      <!-- ObjectPath, jQuery REST -->
      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/objectpathjs/0.0.1/interpreter.js"
      ></script>
      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/objectpathjs/0.0.1/parse.js"
      ></script>
      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/objectpathjs/0.0.1/tokens.js"
      ></script>
      <script
        defer="defer"
        type="text/javascript"
        src="//cdn.muikkuverkko.fi/libs/jquery.rest/1.0.2/jquery.rest.min.js"
      ></script>

      <!-- Api -->
      <script
        defer="defer"
        type="text/javascript"
        src="#{request.contextPath}/scripts/api/api.js"
      />

      <!-- Heartbeat -->
      <script
        defer="defer"
        type="text/javascript"
        src="#{request.contextPath}/scripts/gui/heartbeat.js"
      />

      <!-- Muikku icons -->
      <link
        rel="stylesheet"
        type="text/css"
        href="//cdn.muikkuverkko.fi/assets/muikku-icons/1.4.6/style.css"
      />

      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&amp;display=swap"
        rel="stylesheet"
      />

      <ui:insert name="styles"></ui:insert>

      <!-- Here goes what a page needs, usually their controllers -->
      <ui:insert name="scripts"></ui:insert>
    </head>

    <body>
      <div id="app"></div>

      <!-- Google Analytics -->
      <script>
        window.ga =
          window.ga ||
          function () {
            (ga.q = ga.q || []).push(arguments);
          };
        ga.l = +new Date();
        ga("create", "UA-7407719-33", "auto");
        ga("send", "pageview");
      </script>
      <script
        async="async"
        src="https://www.google-analytics.com/analytics.js"
      ></script>
      <!-- End Google Analytics -->
    </body>
  </f:view>
</html>
