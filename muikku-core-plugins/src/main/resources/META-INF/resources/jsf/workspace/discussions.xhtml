<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"  
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  template="/jsf/workspace/templates/workspace-discussion-view.xhtml">

  <ui:define name="workspace.content.top.left"> 
    <m:widget name="workspace-discussion-new-message" size="6" rendered="#{sessionBackingBean.loggedIn}"/>
  </ui:define>
  
  <ui:define name="workspace.content.top.center"> 
    <m:widget name="workspace-discussion-browse-areas" size="6" rendered="#{sessionBackingBean.loggedIn}"/>
    <m:widget name="workspace-discussion-new-area" size="6" rendered="#{sessionBackingBean.teacherLoggedIn || sessionBackingBean.managerLoggedIn || sessionBackingBean.administratorLoggedIn}"/>
    <!-- TODO: Add this when scripts are unified between environment and workspace  
    <m:widget name="workspace-discussion-delete-area" size="6" rendered="#{sessionBackingBean.teacherLoggedIn || sessionBackingBean.managerLoggedIn || sessionBackingBean.administratorLoggedIn}"/> 
    -->
  </ui:define>
  
  <ui:define name="workspace.content.center.widget">
    <m:widget name="discussion-messages" size="24" /> 

    <input type="hidden" name="userEntityId" value="#{muikkuSession.loggedUserEntity.id}"/>
    <input type="hidden" name="workspaceEntityId" value="#{workspaceDiscussionsBackingBean.workspaceEntityId}"/>
    <input type="hidden" name="areaPermissions" value="#{workspaceDiscussionsBackingBean.areaPermissions}"/>
  </ui:define>

</ui:composition>
